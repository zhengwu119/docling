# Docling Web Demo ä½¿ç”¨æŒ‡å—

## ğŸŒŸ é¡¹ç›®ä»‹ç»

è¿™æ˜¯ä¸€ä¸ªåŸºäºFlaskçš„Webç‰ˆDoclingæ–‡æ¡£è½¬æ¢å™¨ï¼Œæä¾›ç›´è§‚çš„ç”¨æˆ·ç•Œé¢ï¼Œæ”¯æŒå¤šç§æ–‡æ¡£æ ¼å¼çš„åœ¨çº¿è½¬æ¢å’Œé¢„è§ˆã€‚

## âœ¨ ä¸»è¦åŠŸèƒ½

### ğŸ“¤ æ–‡ä»¶ä¸Šä¼ 
- **æ‹–æ‹½ä¸Šä¼ **: ç›´æ¥å°†æ–‡ä»¶æ‹–æ‹½åˆ°ä¸Šä¼ åŒºåŸŸ
- **ç‚¹å‡»ä¸Šä¼ **: ç‚¹å‡»é€‰æ‹©æ–‡ä»¶æŒ‰é’®
- **æ ¼å¼æ”¯æŒ**: PDF, DOCX, PPTX, XLSX, HTML, MD, å›¾ç‰‡ç­‰
- **å¤§å°é™åˆ¶**: æœ€å¤§æ”¯æŒ100MBæ–‡ä»¶

### ğŸ”„ æ™ºèƒ½è½¬æ¢
- **å¤šæ ¼å¼è¾“å‡º**: Markdown, HTML, JSON, YAML, çº¯æ–‡æœ¬, DocTags
- **å®æ—¶è¿›åº¦**: æ˜¾ç¤ºè½¬æ¢è¿›åº¦å’ŒçŠ¶æ€
- **å¼‚æ­¥å¤„ç†**: åå°è½¬æ¢ï¼Œä¸é˜»å¡ç•Œé¢

### ğŸ‘€ åœ¨çº¿é¢„è§ˆ
- **å³æ—¶é¢„è§ˆ**: è½¬æ¢å®Œæˆåå¯ç›´æ¥åœ¨çº¿é¢„è§ˆ
- **å¤šæ ¼å¼åˆ‡æ¢**: æ”¯æŒåœ¨ä¸åŒè¾“å‡ºæ ¼å¼é—´å¿«é€Ÿåˆ‡æ¢
- **æ–°çª—å£æ‰“å¼€**: HTMLæ ¼å¼åœ¨æ–°çª—å£ä¸­å±•ç¤º

### ğŸ“Š ä»»åŠ¡ç®¡ç†
- **å†å²è®°å½•**: æ˜¾ç¤ºæœ€è¿‘çš„è½¬æ¢ä»»åŠ¡
- **çŠ¶æ€è·Ÿè¸ª**: å®æ—¶æ›´æ–°ä»»åŠ¡çŠ¶æ€
- **å¿«é€Ÿè®¿é—®**: ç‚¹å‡»å†å²è®°å½•å¿«é€ŸæŸ¥çœ‹ç»“æœ

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹æ³•ä¸€: ä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
# æ™®é€šå¯åŠ¨
./start_web_demo.sh

# ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒå¯åŠ¨
./start_web_demo.sh --venv
```

### æ–¹æ³•äºŒ: æ‰‹åŠ¨å¯åŠ¨

```bash
# å®‰è£…ä¾èµ–
pip install -r requirements-web.txt

# å¯åŠ¨æœåŠ¡
python3 web_demo.py
```

### æ–¹æ³•ä¸‰: Dockerå¯åŠ¨ï¼ˆå¯é€‰ï¼‰

```bash
# æ„å»ºé•œåƒ
docker build -t docling-web-demo .

# è¿è¡Œå®¹å™¨
docker run -p 5000:5000 docling-web-demo
```

## ğŸŒ è®¿é—®åº”ç”¨

å¯åŠ¨æˆåŠŸåï¼Œåœ¨æµè§ˆå™¨ä¸­è®¿é—®: http://localhost:8080

## ğŸ“‹ ç³»ç»Ÿè¦æ±‚

### åŸºç¡€è¦æ±‚
- **Python**: 3.9+
- **å†…å­˜**: æœ€å°‘2GBï¼Œæ¨è4GB+
- **å­˜å‚¨**: è‡³å°‘1GBå¯ç”¨ç©ºé—´
- **ç½‘ç»œ**: éœ€è¦è®¿é—®HuggingFaceä¸‹è½½æ¨¡å‹

### ä¾èµ–åº“
```
flask>=2.3.0          # Webæ¡†æ¶
flask-cors>=4.0.0     # è·¨åŸŸæ”¯æŒ
docling>=2.55.1       # æ–‡æ¡£è½¬æ¢æ ¸å¿ƒ
PyYAML>=6.0           # YAMLæ ¼å¼æ”¯æŒ
```

## ğŸ¯ ä½¿ç”¨æµç¨‹

### 1. ä¸Šä¼ æ–‡æ¡£
- æ‰“å¼€Webé¡µé¢
- é€‰æ‹©æˆ–æ‹–æ‹½æ–‡ä»¶åˆ°ä¸Šä¼ åŒºåŸŸ
- é€‰æ‹©éœ€è¦çš„è¾“å‡ºæ ¼å¼
- ç‚¹å‡»å¼€å§‹è½¬æ¢

### 2. ç›‘æ§è¿›åº¦
- å®æ—¶æŸ¥çœ‹è½¬æ¢è¿›åº¦
- ç³»ç»Ÿä¼šæ˜¾ç¤ºå½“å‰å¤„ç†çŠ¶æ€
- è½¬æ¢å®Œæˆåè‡ªåŠ¨æ˜¾ç¤ºç»“æœ

### 3. æŸ¥çœ‹ç»“æœ
- æµè§ˆæ–‡æ¡£ä¿¡æ¯ï¼ˆé¡µæ•°ã€å­—æ•°ç­‰ï¼‰
- é€‰æ‹©ä¸åŒæ ¼å¼è¿›è¡Œé¢„è§ˆ
- ä¸‹è½½éœ€è¦çš„æ ¼å¼æ–‡ä»¶

### 4. å†å²ç®¡ç†
- æŸ¥çœ‹è½¬æ¢å†å²è®°å½•
- é‡æ–°è®¿é—®ä¹‹å‰çš„è½¬æ¢ç»“æœ
- ç®¡ç†è½¬æ¢ä»»åŠ¡

## ğŸ”§ APIæ¥å£

### æ–‡ä»¶ä¸Šä¼ 
```
POST /api/upload
Content-Type: multipart/form-data

å‚æ•°:
- file: æ–‡ä»¶å¯¹è±¡
- formats[]: è¾“å‡ºæ ¼å¼æ•°ç»„

è¿”å›:
{
    "task_id": "uuid",
    "filename": "document.pdf",
    "status": "uploaded",
    "message": "æ–‡ä»¶ä¸Šä¼ æˆåŠŸ"
}
```

### çŠ¶æ€æŸ¥è¯¢
```
GET /api/status/{task_id}

è¿”å›:
{
    "task_id": "uuid",
    "filename": "document.pdf",
    "status": "completed",
    "progress": 100,
    "conversion_time": 15.2,
    "document_info": {
        "page_count": 10,
        "word_count": 2500
    },
    "output_files": {
        "markdown": "document.md",
        "html": "document.html"
    }
}
```

### æ–‡ä»¶é¢„è§ˆ
```
GET /api/preview/{task_id}/{format}

è¿”å›: æ–‡ä»¶å†…å®¹æˆ–HTMLé¡µé¢
```

### æ–‡ä»¶ä¸‹è½½
```
GET /api/download/{task_id}/{format}

è¿”å›: æ–‡ä»¶ä¸‹è½½
```

### ä»»åŠ¡åˆ—è¡¨
```
GET /api/tasks

è¿”å›:
{
    "tasks": [
        {
            "task_id": "uuid",
            "filename": "document.pdf",
            "status": "completed",
            "created_at": 1640995200
        }
    ]
}
```

### æ”¯æŒæ ¼å¼
```
GET /api/supported-formats

è¿”å›:
{
    "input_formats": {...},
    "output_formats": {...}
}
```

## âš™ï¸ é…ç½®é€‰é¡¹

### åº”ç”¨é…ç½®ï¼ˆweb_demo.pyï¼‰

```python
# ç«¯å£å’Œä¸»æœº
app.run(host='0.0.0.0', port=8080)

# æ–‡ä»¶å¤§å°é™åˆ¶
app.config['MAX_CONTENT_LENGTH'] = 100 * 1024 * 1024  # 100MB

# æ”¯æŒçš„æ–‡ä»¶æ ¼å¼
ALLOWED_EXTENSIONS = {
    'pdf', 'docx', 'pptx', 'xlsx', 'html', 'htm', 'md', 
    'csv', 'png', 'jpg', 'jpeg', 'tiff', 'bmp', 'webp',
    'asciidoc', 'adoc', 'asc', 'vtt'
}
```

### PDFå¤„ç†é€‰é¡¹

```python
pdf_options = PdfPipelineOptions()
pdf_options.generate_page_images = True    # ç”Ÿæˆé¡µé¢å›¾ç‰‡
pdf_options.generate_picture_images = True # æå–æ–‡æ¡£å›¾ç‰‡
```

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**Q: å¯åŠ¨æ—¶æç¤ºç«¯å£å ç”¨**
```bash
# æŸ¥çœ‹å ç”¨ç«¯å£çš„è¿›ç¨‹
lsof -i :8080

# ä¿®æ”¹ç«¯å£å·
# ç¼–è¾‘ web_demo.pyï¼Œå°† port=8080 æ”¹ä¸ºå…¶ä»–ç«¯å£
```

**Q: æ–‡ä»¶ä¸Šä¼ å¤±è´¥**
- æ£€æŸ¥æ–‡ä»¶å¤§å°æ˜¯å¦è¶…è¿‡100MB
- ç¡®è®¤æ–‡ä»¶æ ¼å¼æ˜¯å¦æ”¯æŒ
- æ£€æŸ¥ç£ç›˜ç©ºé—´æ˜¯å¦å……è¶³

**Q: è½¬æ¢é€Ÿåº¦å¾ˆæ…¢**
- PDFè½¬æ¢éœ€è¦æ—¶é—´è¿›è¡Œå¸ƒå±€åˆ†æ
- å¤§æ–‡ä»¶å¤„ç†æ—¶é—´è¾ƒé•¿
- é¦–æ¬¡è¿è¡Œéœ€è¦ä¸‹è½½æ¨¡å‹

**Q: é¢„è§ˆæ˜¾ç¤ºä¹±ç **
- ç¡®è®¤æ–‡ä»¶ç¼–ç æ˜¯å¦æ­£ç¡®
- æ£€æŸ¥æµè§ˆå™¨æ˜¯å¦æ”¯æŒè¯¥æ ¼å¼

### æ—¥å¿—æŸ¥çœ‹

åº”ç”¨è¿è¡Œæ—¶ä¼šåœ¨æ§åˆ¶å°è¾“å‡ºè¯¦ç»†æ—¥å¿—ï¼š

```bash
# å¯åŠ¨æ—¶çš„æ—¥å¿—ä¿¡æ¯
2024-01-01 10:00:00 - INFO - å¼€å§‹è½¬æ¢ä»»åŠ¡ xxx: document.pdf
2024-01-01 10:00:15 - INFO - ä»»åŠ¡ xxx è½¬æ¢æˆåŠŸï¼Œè€—æ—¶: 15.20ç§’
```

### æ€§èƒ½ä¼˜åŒ–

1. **å¢åŠ å†…å­˜**: å¤„ç†å¤§æ–‡æ¡£æ—¶å¢åŠ ç³»ç»Ÿå†…å­˜
2. **ä½¿ç”¨SSD**: æé«˜æ–‡ä»¶è¯»å†™é€Ÿåº¦
3. **å…³é—­å›¾ç‰‡ç”Ÿæˆ**: å¦‚ä¸éœ€è¦å›¾ç‰‡å¯å…³é—­ç›¸å…³é€‰é¡¹
4. **æ‰¹é‡å¤„ç†**: é¿å…åŒæ—¶å¤„ç†å¤šä¸ªå¤§æ–‡ä»¶

## ğŸ“ æ–‡ä»¶ç»“æ„

```
docling/
â”œâ”€â”€ web_demo.py              # Flaskä¸»åº”ç”¨
â”œâ”€â”€ templates/
â”‚   â””â”€â”€ index.html          # å‰ç«¯é¡µé¢
â”œâ”€â”€ requirements-web.txt     # Webç‰ˆä¾èµ–
â”œâ”€â”€ start_web_demo.sh       # å¯åŠ¨è„šæœ¬
â”œâ”€â”€ web_uploads/            # ä¸Šä¼ æ–‡ä»¶ç›®å½•
â””â”€â”€ web_outputs/            # è½¬æ¢ç»“æœç›®å½•
    â””â”€â”€ {task_id}/          # æŒ‰ä»»åŠ¡IDåˆ†ç»„çš„è¾“å‡º
        â”œâ”€â”€ document.md
        â”œâ”€â”€ document.html
        â””â”€â”€ document.json
```

## ğŸ”’ å®‰å…¨è¯´æ˜

- âœ… æ‰€æœ‰æ–‡ä»¶åœ¨æœ¬åœ°å¤„ç†ï¼Œä¸ä¼šä¸Šä¼ åˆ°å¤–éƒ¨æœåŠ¡å™¨
- âœ… æ”¯æŒçš„æ–‡ä»¶æ ¼å¼ç»è¿‡éªŒè¯ï¼Œé™ä½å®‰å…¨é£é™©
- âœ… æ–‡ä»¶å¤§å°é™åˆ¶é˜²æ­¢DoSæ”»å‡»
- âš ï¸ ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²æ—¶å»ºè®®æ·»åŠ èº«ä»½éªŒè¯
- âš ï¸ å®šæœŸæ¸…ç†ä¸´æ—¶æ–‡ä»¶é¿å…ç£ç›˜ç©ºé—´è€—å°½

## ğŸš¢ ç”Ÿäº§éƒ¨ç½²

### ä½¿ç”¨Gunicorn

```bash
# å®‰è£…Gunicorn
pip install gunicorn

# å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
gunicorn -w 4 -b 0.0.0.0:8080 web_demo:app
```

### ä½¿ç”¨Nginxåå‘ä»£ç†

```nginx
server {
    listen 80;
    server_name your-domain.com;

    location / {
        proxy_pass http://127.0.0.1:8080;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        client_max_body_size 100M;
    }
}
```

## ğŸ¤ è´¡çŒ®ä¸æ”¯æŒ

- é—®é¢˜æŠ¥å‘Š: è¯·åœ¨GitHub Issuesä¸­æäº¤
- åŠŸèƒ½å»ºè®®: æ¬¢è¿æäº¤Feature Request
- ä»£ç è´¡çŒ®: è¯·æäº¤Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäºMITè®¸å¯è¯å¼€æºï¼Œè¯¦è§LICENSEæ–‡ä»¶ã€‚